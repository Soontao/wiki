# Some points about security

Some points about security

## Password

Note: 密码在上个时代的产物，那个时候还没有各种生物识别硬件，现在依旧被各大网站采用。关于密码，我有以下几点提醒。

Attention: 执行一部分即可降低密码相关安全风险。

* 在关键的账户使用不同的密码

  在某些核心的账户，比如**常用邮箱**，**支付宝/微信的支付密码**，**银行密码/手机号业务密码**，使用完全不同的密码。特别是某一些需求邮箱作为登录名的网站，密码务必不要和邮箱密码一样。一个典型的事例就是，黑客攻破小网站，拿到邮箱密码，然后通过邮箱重置其他网站的密码。

* 如果能够使用第三方登录，尽量使用第三方登录

  方便，而且安全，过程中避免了密码的传输。另外一点就是，提供第三方登录的网站，例如```微信/微博/QQ```，自身安全程度也比较高。

* 在https页面填写密码

  https是安全的http协议，http协议是明文传输，所以在客户端到服务器之间任何一个位置都有可能被劫持，如果密码的报文被截获，那么密码再复杂也没用。

  由于https证书有一定门槛，也可以防止一些钓鱼网站的攻击。

* 避免太复杂的密码

  现在直接进行暴力破解已经不是很划算了，黑客通常用彩虹表和钓鱼直接拿到密码，太复杂的密码也没什么用，徒劳增加记忆成本。

* 使用无意义的密码

  通常网站/应用注册时会对密码明文进行hash，但是大多网站使用极为简单的hash，就可以根据彩虹表获取明文。

  如果密码中记录了**姓名/生日/地址/爱好**等信息，就容易被纳入社会工程学攻击中。

* 使用一些密码管理工具

  为不同网站/应用随机生成密码，记住一个管理工具的密码即可

  这里有一个[使用chrome随机密码](/#!tools/config/generated-passwd.md)的教程

## PC/Windows

Note: 如果你使用Windows

* 使用正版Windows/Office

  如果个人不得不使用盗版，请考虑安装原版之后使用[kmspico](https://www.google.com/search?q=kmspico&oq=kmspico&aqs=chrome..69i57j0l5.1570j0j9&sourceid=chrome&ie=UTF-8)之类的程序手动激活。

  如果你是```学生/企业雇员```，请考虑询问IT部门提供正版程序，通常是批量激活，不会很麻烦。

* 尽量使用正版软件

  软件破解者通常加入私货。

  曾有新闻，DBS使用破解的软件管理数据库，结果这个破解的软件锁(加密)了整个数据库实例，并勒索。

* 确保你的所有软件都是你自己安装的

  如果PC在你到手的时候已经安装了QQ/迅雷等等软件，建议你重装系统。

  删软件重装也没用，整个系统被装了后门。

* 善于使用UAC

  请不要禁用UAC，当没有执行做任何操作，系统却申请权限提升的时候，请拒绝，很有可能是病毒/流氓软件。

* 请不要点击**任何页面**上的**高速下载**

  潜规则，普通下载就是普通下载，**高速下载通常是流氓软件大礼包**。

## Linux

Note: 如果你接触Linux

* 禁止SSH密码登录

  为所有用户启用秘钥登录，禁止使用Linux密码登录，避免服务器被暴力破解。

  类似的还有禁止root用户从ssh登录，因为Linux总是有一个root用户，而其它用户的用户名对于黑客来说并不知情(没有社会工程学的情况下)

* 禁止NOPASSWD的SUDO

  非常危险的行为，特别是对于PHP或者一些其它后端Web程序来说，远程代码执行漏洞的权限轻易被提升到root级别。

  默认情况下，linux不会配置nopasswd，运维也不要为了偷懒去手动配。

* 避免root运行用户程序

  root运行ngx/apache反向代理，www-data运行web程序。

  理由同上，降低远程执行漏洞的损失。

## Network

* 尽可能避免使用没有密码的WIFI

  当使用无密码的WIFI时，(win)系统会提醒你信息有泄漏的风险，实际上是你的网络数据全部以明文格式在空气中传播。极容易被Omnipeek一类的软件嗅探密码和其它数据。

  如果**不得不**使用没有密码的WIFI时，请尽量使用https连接到网站/应用，或者使用VPN。

* 尽量避免使用公共WIFI

  如果公共WIFI被hack掉，那么可以使用tcpdump一类的程序嗅探所有经过的流量，而如果是公共WIFI所有者心怀不轨，那么使用它就更危险了。

  同样，如果不得不用，请尽量使用https和vpn以避免中间人攻击。

* 避免直接把计算机暴露在公网上

  一般情况下，运营商会给用户内网ip，这样虽然损害了部分用户的权益，但是保护了大部分用户的安全。

  如果你的网络端口被分配了公网ip，请务必不要直接接上PC或服务器。

  请在公网和内网之间至少加一个路由器(或L3 Switch)做NAT，避免被直接扫描。如果需要暴露端口，请在路由器做端口转发/映射。

  一个非常明显的例子就是之前mongodb被大规模攻击的事件，因为mongodb默认没有密码，所以通过扫描27017端口，黑客劫持了部分mongodb并勒索赎金。

  现在你依旧可以通过[https://www.shodan.io/search?query=27017](https://www.shodan.io/search?query=27017)，找到全球暴露27017端口的服务器。

## Mobile

Note: 大部分人平时生活已经远离的PC，手机已经变成了多数人的玩具，移动安全成为一个大问题

* 预算充足买IPhone

* 不要越狱/root

* 尽量从官方/大型的应用商店下载正规的应用

  **不要下载使用```修改/美化/精简```版的任何应用！！！**

* 不要安装一些乱七八糟的应用

  不要相信什么```棋牌游戏/免费领取/无线WIFI/二维码/美女```之类的应用，不是广告就是病毒。


## Web Application

Note: WEB应用安全大多太杂

* 使用可靠的依赖

  什么叫做可靠的依赖呢，就是被使用最多的库，它们经过大多数人的验证并修复了更多的bug。对于java来说，就是spring全家桶。

  也是一个简单的例子，之前fastjson被爆出远程代码执行漏洞，很快就被修复了，如果是一个冷门甚至是停止维护的库，就会变得比较麻烦。可以自己做patch，但是依旧会浪费资源。

  struts三天两头出严重漏洞，对于一个维护级的项目来说也不能要求更多了。[这里](https://github.com/s1kr10s/Struts2Shell)就有一个交互式的struts远程执行脚本。

* 应用遵循一些通用的安全规范

  使用常用的授权认证协议，使用RBAC，使用ORM避免注入，密码加盐hash，服务端验证等等。

* 考虑使用WAF

  Web Application Firewall，比较知名的是OpenResty(或者叫做nginx + lua)，通常与反向代理紧密结合，过滤一些明显的恶意请求，例如```SQL注入，远程代码执行，XSS```，规则可以自己编，或者买。

  各大云平台也有WAF服务，不过比较贵，看个人还是企业需求。

* 不要使用XaaS服务

  请等待技术成熟，不要盲目使用新技术。

  特别是不要盲目使用微服务 + 服务治理 + Container + MQ + NoSQL + DB，大多数的业务并不需要超高并发。

  引入新技术 = 引入新漏洞。


## General

Note: You could survive from the information society even if you do not comply with the above points.

* Keep away

  如果没有internet，那么你是安全的。

* Be careful

  小心点儿，网络上的一切都不是那么安全，警惕怀疑，趋利避害。

* Be prepared

  有备无患，使用硬盘/NAS/Ondrive/ICould or whatever备份你的数据。

  check your backups works well, remember the backup disaster of gitlab
