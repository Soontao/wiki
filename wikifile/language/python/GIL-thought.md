# 关于GIL的思考

全局解释器锁（英语：Global Interpreter Lock，缩写GIL），是计算机程序设计语言解释器用于同步线程的一种机制，它使得任何时刻仅有一个线程在执行。常见例子有CPython（Jython不使用GIL）与Ruby MRI。

## points

* 存在于解释器中，不与语言绑定。
* CPython的线程是操作系统的原生线程。在Linux上为pthread，在Windows上为Win thread，完全由操作系统调度线程的执行。一个Python解释器进程内有一个主线程，以及多个用户程序的执行线程。即便使用多核心CPU平台，由于GIL的存在，也将禁止多线程的并行执行。
* 锁以字节码为单位获取和释放，所以语言并非线程安全，仍旧需要用户态同步。

## thoughts

* 简化解释器的开发。
* 降低CPU密集型app的性能，无法通过多线程利用多核。对IO密集型应无太大影响，类似协程。
* 使语言转向多进程，使同步复杂化，变为IPC进程间通信。