# 大型机操作系统 笔记
## 大型机操作系统
* z/OS
* z/VM 平台虚拟机 可以嵌套
* VSE 低端配置
* Linux for zSeries
* z/TPF 专注交易

## z/OS系统运行模式
* S/370 本机模式 [对于370的兼容] 
  24位地址 指令集217条 最大32通道[不支持ESCON/集成IO适配器]
* ESA/390 模式 
  32位地址 2GB内存 指令集229条 最大256通道 对24位程序兼容
* ESA/390 LPAR 方式 [主要]
  PR/SM 最多16LPAR分区运行 多处理器多系统[系统硬件完全池化]
* Sysplex 并行耦合
  加强的分布式系统 构成并行复合系统 对于外部依旧是同一整机
## 功能特点(不容许单点故障)
* 正向兼容 
  向前兼容软件
* 向量处理
  专用硬件
* 通道结构 ESCON (Enterprise System Connection Architecture)
  光纤 结构 I/O设备可远距离放置
* 加密
* 地址宽度
  s/370 31位 z900 64位
* 硬件缓冲
  首先使用Cache
* 电源系统
  多重电源 备用电池 电容保护
* 硬件纠错 存储器检测
* 部件冗余
* 动态配置

## z/OS 组件
#### 硬件
* 主机
* DASD 磁盘存储
* 磁带驱动器
* 各种专用控制台(磁带 DASD LPAR...)

#### 模块和宏
* 模块 -- 一组指令
* 系统组件 -- 模块集
* 宏 -- 一系列针对系统操作的指令

#### 程序状态字PSW
* 保存运行程序的关键信息
* 64位数据区
* 上下文
* 每个处理器有一个PSW

#### 多道程序和多重处理
* 虚拟内存/交换区
* 支持多道程序,执行不同用户的多个程序,通过现场保护和恢复实现多道程序
* 支持多重处理,让多个处理器共享各种资源
* 因此需要大量内存以保证系统性能

#### 虚拟存储及地址空间
* 所有程序访问虚拟存储,底层由操作系统实现
#### 控制块 
* 与操作系统的PCB进程控制模块类似,存储在内存中
* 存储相应程序地址,当前数据,状态字
* 三种类型的任务控制块
* 系统控制块
* 资源控制块
* 任务控制块
* 控制块为系统通信提供服务

#### 物理存储
* 内存/主存/实寸/MEMORY -- 同步访问
* 辅存/外存 -- 异步访问

## z/OS系统特点
* 地址空间(共有,私有)
* 数据完整性(安全,并发)
* 批处理任务(JOB,作业)
* 用户权限管理
* 子系统并行通信
* 丰富的软件恢复级别(现场保存,崩溃时恢复)
* 自动资源管理
* 管理大量IO设备
* 自动管理脚本
* 管理员接口

## z/OS软件产品
* 安全系统 RACF
* 编译器 汇编 COBOL JAVA
* 数据库 DB2 IMS
* 事务处理 CICS 中间件
* 排序 DFSORT
* 实用程序 SDSF
* 供应商程序

## 中间件 MiddleWare
* 数据库
* 网络服务器
* 消息队列 路由
* 处理管理器
* JVM
* XML处理

#### 中间件API
* WebSphere API
* DB2 APi
* More

## 复习思考

### 大型机体系结构中各功能部件的最重要的特征是什么

“大”

1. 集中处理之数据量
2. 并发访问之用户数
3. 并行连接之设备数
4. 计算功能之复杂度
5. 安全稳定之可靠性
6. 机电系统之工艺化

### 大型机的最基本运行模式是什么，大型机有哪些运行模式，其主要功能特征是什么。

* S/370基本任选方式
    在S/370基本方式中，S/390可以执行S/370的217条指令；存储器使用24位地址，也就是说，最多支持16MB的虚拟存储器,同时支持16个通道和集成I/O适配器，但在此方式下不支持ESCON通道。

* S/370本机方式
    在此方式下，S/390同样可以执行S/370的217条指令,但是它利用S/370的扩展实寻址的26位地址，可以将中央处理器扩展到64位,提高了整个系统的性能。
    S/370本机方式的另一个优点是系统的最大通道数增加到了32，这些通道可以是并行通道，但不能是ESCON通道或S/370多路选择通道。

* ESA/390方式
    这个方式的运行是按企业系统结构（ESA）／390所确定的功能来进行的，其指令集扩展到了229条指令。它使用64位地址，因此虚拟地址空间扩展到了16EＢ，但仍与24位的程序相兼容。在最大的z900计算机系统中，总共可以配置256个通道。它支持并行通道.ESCON通道或集成I/O适配器。在硬件中还有自动处理“通道占线”条件，它可以十分有效地减少与I/O动作有关的整个等待或延迟时间。

* ESA/390 LPAR方式
    系统在物理上是在一个机柜中，但是在逻辑上它可以划分为最多十个部分。
    这种逻辑上的划分是由被称为处理器资源／系统管理器（PR/SM）的微码来完成的。




### 大型机系统的体系结构区别于非大型机系统有哪些特征，各个的功能部件之间是如何连接和通讯的。

* ESCON(企业系统连接结构)
    这是一种新的输入输出结构,应用光缆，利用光通讯而不是传统的电子讯号；
* 加密结构
    在z900系统中，计算机通过集成密码特征来实现对计算机中的信息进行加密或解密，以防止信息被非法访问；
* 子系统存储保护
    防止诸如CICS等子系统对存储器的干扰,这个功能由操作系统和子系统共同提供；
* 数据压缩
    是指z900在硬件级上提供数据压缩，其速度是软件压缩的5倍以上；
* 异步数据转移结构（ADMF）
    利用I/O处理器更有效地实现中央存储器与扩展存储器之间的信息移动，以空出处理器来完成其它任务；
* DB2排序增强
    允许使用硬件完成DB2的排序算法；


### Z系列大型机上可以运行的操作系统有哪些，其主要功能特征是什么。

1. z/OS
    z/OS是使用最广泛的基于64位z体系结构大型机操作系统
    z/OS的设计是为了给在大型机上应用程序员提供稳定.安全和可持续运行的环境
2. z/VM
    控制程序CP
    一个单用户的操作系统CMS
3. VSE
4. Linux for zSeries
    zSeries版Linux（64bit）
5. z/TPF
    一种在实时环境中运行交易处理应用程序的操作系统，主要用于面向交易量较大的业务 


### 批处理系统、联机事务处理系统、个人终端系统的分类、功能特征和应用场合是什么

|      | 批处理系统 | 联机事务处理系统 | 个人终端系统 |
| ---- | ----- | -------- | ------ |
| 分类   |   单道，多道    |        |        |
| 功能特征 | 批处理操作系统不具有交互性，一批事务被存储一段时间，然后再被执行。       |  在联机事务处理中，事务是被立即执行的，这与批处理相反        |       |
| 应用场合 |   大量计算的应用    |   面向交易的应用       |   个人      |

### 现在的大型机系统中有哪些主要的设备

* 大机
    CPU 存储器
* 磁带驱动器
* DASD（直接访问存储设备）控制器
    磁盘卷
* 系统控制台

### RACF的安全管理包括哪几大功能

RACF(Resource Access Control Facility)

 验证一个用户
        —— 检验用户名和口令
 资源授权检查
        —— 检查对程序和数据的访问权限
 记录和报告
        —— 跟踪用户和程序的运行
 安全管理
     —— 配置管理参数和模式 

### 多道程序设计和多重处理是什么意思，其意义是什么。

z/OS能支持多道程序设计，即同时执行不同用户的多个程序

z/OS还可以执行多重处理，即让两个或更多的处理器共享各种的硬件资源同时运行，如内存和外部磁盘存储设备。

意义：
多道程序设计和多重处理技术使得z/OS非常适合处理需要很多I/O操作的作业。

### LPAR的基本概念是什么

将一台物理机器划分为多个逻辑机器，各分区独立运行

### 虚拟地址空间的概念是什么

操作系统分配给用户或独立运行的程序的虚拟地址范围称为地址空间（Address Space）这是执行指令和存储数据可利用的相邻的虚拟地址区域。地址空间的虚拟地址范围从0开始，并可扩展到操作系统的体系结构允许的最高地址。

### z/OS操作系统中存放数据的地方是什么，其中的最小数据单位是什么。

外存
数据集

### 大型机系统中有哪几种寻址能力，对应的地址空间是多大

直接寻址 16EB
虚拟内存寻址 16EB

### 在z/OS中的存储分类有哪些，管理的单位是什么。

* 磁带 

* 直接访问设备 

管理的单位是数据集

### z/OS操作系统中的控制块有哪几类

1. 与系统相关的控制块
2. 与资源相关的控制块
3. 与任务相关的控制块

### 大型机系统中存储管理主要进行哪些方面的工作

1. 介质管理

2. 数据管理

3. 空间管理

4. 可用性管理

### JES系统处理一个作业的流程和各阶段的功能是什么

* 输入(Input)
* 转换(Conversion)
* 运行(Processing)
* 输出(Output)
* 打印(Print/Punch)
* 清除(Purge) 

### 编目的功能、用法和分类是什么

对数据集的编目实际上是对数据集的入口建立列表和索引。

在z/OS系统中，编目分为两种，一种是主编目，一种是用户编目。